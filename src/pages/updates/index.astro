---
import { getCollection } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import formatDate from "@/utils/formatDate";

const posts = await getCollection("updates");
const sortedPosts = posts.sort((a, b) => 
  new Date(b.data.publishedAt).getTime() - new Date(a.data.publishedAt).getTime()
);
---

<Layout title="Cute Union - Updates">
  <main class="flex flex-col gap-20 px-10">
    <h1 class="text-2xl text-primary">Updates</h1>

    <article class="flex flex-col gap-4">
      {
        sortedPosts.map((post) => (
          <a
            class="group flex flex-col gap-2 border-t border-secondary py-4 transition-all "
          >
            <div class="flex w-full items-center justify-between">
              <p class="text-lg font-semibold">{formatDate(post.data.publishedAt)}</p>
            </div>
            <p>{post.data.description}</p>
          </a>
        ))
      }
    </article>
  </main>
</Layout>
