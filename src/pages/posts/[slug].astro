---
import Comment from "../components/Comment.astro";
const { frontmatter } = Astro.props;

import { CollectionEntry, getCollection } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import formatDate from "@/utils/formatDate";
import Comment from "@/components/Comment.astro";

export async function getStaticPaths() {
  const posts = await getCollection("posts");

  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

type Props = {
  post: CollectionEntry<"posts">;
};

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title}>
  <main id="post-slug" class="post mx-auto flex w-full flex-col gap-4">
    <header role="presentation">
      <h1 class="text-2xl">
        {post.data.title} - {formatDate(post.data.publishedAt)}
      </h1>
      <p class="italic">{post.data.description}</p>
    </header>

    <Content />
    <Comment />
  </main>
</Layout>

<style is:global>
  #cusdis_thread {
    scrollbar-width: thin;
    scrollbar-color: white #cfefff;
  }
  #cusdis_thread iframe {
    border-radius: 12px;
    height: 100%;
    border: 2px solid #b6deef;
    width: 100%;
    min-height: 400px;
    transition: all 0.3s ease;
    font-family: MS Gothic;
  }

  /* ul {
    @apply list-inside list-disc;
  } */
  ol {
    @apply list-inside list-decimal;
  }
</style>
